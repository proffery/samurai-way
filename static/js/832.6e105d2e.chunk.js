"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[832],{3676:(e,n,t)=>{t.d(n,{t:()=>l});var r,a=t(168),s=t(198),i=t(7884),o=t(2027);const l=i.ZP.h2(r||(r=(0,a.Z)(["\n    position: relative;\n    word-wrap: break-word;\n    padding-bottom: min(20px, 2vw);\n    width: 100%;\n    color: ",";\n    ",'\n    &::before {\n        position: absolute;\n        content: "";\n        height: 1px;\n        width: 100%;\n        left: 0;\n        top: 100%;\n        background-color: ',";\n    }\n    @media "," {\n        padding-bottom: 20px;\n    }\n"])),o.r.color.text.primary,(0,s.L)({weight:700,Fmin:14,Fmax:26}),o.r.color.background.primary,o.r.media.mobile)},6980:(e,n,t)=>{t.d(n,{c:()=>o});var r,a=t(168),s=t(7884),i=t(2027);const o=s.ZP.section(r||(r=(0,a.Z)(["\n    display: flex;\n    border-radius: 10px;\n    background-color: ",";\n    flex-direction: column;\n    color: ",";\n    padding: min(30px, 2vw);\n    height: fit-content;\n    gap: min(30px, 2vw);\n    box-shadow: ",";\n"])),i.r.color.background.block,i.r.color.text.primary_dark,i.r.shadow.block)},6858:(e,n,t)=>{t.d(n,{S:()=>I});var r,a,s,i=t(3676),o=t(7082),l=t(2791),c=t(168),d=t(198),u=t(8369),g=t(1523),m=t(7884),p=t(2027);const h={Friend:(0,m.ZP)(g.OL)(r||(r=(0,c.Z)(["\n    display: flex;\n    position: relative;\n    align-items: center;\n    justify-content: center;\n    flex-wrap: wrap;\n    height: 100%;\n    width: 100%;\n    gap: 6px;\n    padding: min(15px, 1vw);\n    &::after {\n        position: absolute;\n        content: '';\n        width: 100%;\n        height: 1px;\n        background-color: ",";\n        bottom: 0%;\n    }\n    &:hover {\n        outline: 1px solid ",";\n        background-color: ",";\n        border-radius: 10px;\n    }\n    @media "," {\n        flex-direction: column;\n        justify-content: flex-start;\n        max-width: 20%;\n        min-width: 65px;\n    }\n"])),p.r.color.background.primary,p.r.color.background.primary,p.r.color.background.primary,p.r.media.mobile),Photo:(0,m.ZP)(u.q)(a||(a=(0,c.Z)(["\n    width: 45%;\n"]))),Name:m.ZP.span(s||(s=(0,c.Z)(["\n    width: 53%;\n    text-align: center;\n    ","\n    color: ",";\n    word-wrap: break-word;\n    overflow: hidden;\n"])),(0,d.L)({weight:400,Fmin:10,Fmax:14}),p.r.color.text.primary_dark)};var x=t(184);const f=(0,l.memo)((e=>(0,x.jsxs)(h.Friend,{to:o.m.Profile+e.friendData.id,children:[(0,x.jsx)(h.Photo,{avatarURL:e.friendData.photos.small}),(0,x.jsx)(h.Name,{children:e.friendData.name})]})));var v,w,y,b=t(8472),j=t(80),M=t(6980),k=t(4085);const P={FriendsBlock:(0,m.ZP)(M.c)(v||(v=(0,c.Z)(["\n    display: flex;\n"]))),FriendsList:m.ZP.div(w||(w=(0,c.Z)(["\n    display: flex;\n    align-items: center;\n    width: 100%;\n    justify-content: center;\n    flex-direction: column;\n    overflow-y: auto;\n    overflow-x: hidden;\n    @media "," {\n        flex-direction: row;\n    }\n"])),p.r.media.mobile),FriendsPagination:(0,m.ZP)(k.t)(y||(y=(0,c.Z)(["\n    ","\n    height: 1em;\n"])),(0,d.L)({weight:700,Fmin:10,Fmax:13}))};var L=t(8112),Z=t(5978);const S=e=>e.friends.possibleFriends,D=e=>e.friends.friends;var A=t(1113);const I=(0,l.memo)((e=>{let{headerName:n,className:t,isFriends:r=!0}=e;const{getFriends:a}=(0,L.o)(),{totalUsersCount:s,currentPage:o,usersOnPage:c,users:d}=(0,Z.v9)(r?D:S),u=(0,Z.v9)(A.DU),g=function(e,n){const t=Math.ceil(e),r=Math.floor(n);return Math.floor(Math.random()*(r-t+1)+t)}(1,Math.ceil(s/c));(0,l.useEffect)((()=>{a(g,c,r)}),[]);return(0,x.jsxs)(P.FriendsBlock,{id:n.toLowerCase().replaceAll(" ","-"),className:t,children:[(0,x.jsx)(j.A,{justify:"space-between",children:(0,x.jsx)(b.z,{onClick:()=>{a(g,c,r)},variant:"link",ariaLabel:"Randomize button",children:(0,x.jsx)(i.t,{children:n})})}),(0,x.jsx)(P.FriendsList,{children:d.map((e=>(0,x.jsx)(f,{friendData:e},e.id)))}),(0,x.jsx)(j.A,{justify:"center",direction:"row",children:(0,x.jsx)(P.FriendsPagination,{appIsLoading:u,currentPage:o,totalUsersCount:s,usersOnPage:c,pagesPortion:2,pageChangeHandler:e=>{a(e,c,r)}})})]})}))},4085:(e,n,t)=>{t.d(n,{t:()=>f});var r,a,s=t(8472),i=t(80),o=t(5545),l=t(5705),c=t(2791),d=t(168),u=t(9250),g=t(7884),m=t(2027);const p=(0,g.ZP)(u.I)(r||(r=(0,d.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    box-shadow: ",";\n    color: ",";\n    z-index: 999;\n"])),m.r.shadow.text,m.r.color.text.primary),h={Pagination:(0,g.ZP)(i.A)(a||(a=(0,d.Z)(["\n    position: relative;\n    button {\n        min-height: 15px;\n        min-width: 15px;\n    }\n"]))),PaginationInput:p};var x=t(184);const f=(0,c.memo)((e=>{const{currentPage:n,usersOnPage:t,totalUsersCount:r,pagesPortion:a,className:d,appIsLoading:u,pageChangeHandler:g}=e,m=Math.ceil(r/t),p=Array.from({length:m},((e,n)=>n+1)),f=Math.ceil(p.length/a),[v,w]=(0,c.useState)(Math.ceil(n/a)),[y,b]=(0,c.useState)(!1),j=v*a-a,M=v*a;(0,c.useEffect)((()=>{w(Math.ceil(n/a))}),[n]);const k=(0,l.TA)({initialValues:{page:n},enableReinitialize:!0,onSubmit:e=>{g(e.page),b(!1)},validate:e=>{const n={};return e.page?(e.page<1||e.page>m)&&(n.page="wrong range"):n.page="Page required",n}});return(0,x.jsx)(h.Pagination,{direction:"column",justify:"center",align:"center",className:d,children:(0,x.jsxs)(i.A,{justify:"center",children:[m>a&&(0,x.jsx)(s.z,{className:e.className,ariaLabel:"Change pages range - button",variant:"link",disabled:e.appIsLoading,onClick:()=>{w(v<=1?f:e=>e-1)},children:(0,x.jsx)(o.J,{iconId:"leftArrow",viewBox:"-5 7 20 20",height:"100%",width:"100%"})}),(0,x.jsx)(i.A,{justify:"center",align:"center",children:p.filter(((e,n)=>n>=j&&n<M)).map(((t,r,a)=>(0,x.jsx)(s.z,{ariaLabel:"Go to page button",className:e.className,variant:"link",disabled:n===t||e.appIsLoading,isActive:n===t,onClick:()=>{g(t)},children:r===a.length-1?t.toString():t.toString()+","},t)))}),(0,x.jsxs)(i.A,{justify:"center",align:"center",children:[m>a&&y&&(0,x.jsx)("form",{onSubmit:k.handleSubmit,children:(0,x.jsx)(h.PaginationInput,{type:"number",placeholder:"1-".concat(m),error:k.errors.page&&k.touched.page?"true":"false",name:"page",min:"1",max:m,value:k.values.page,onChange:e=>{k.handleChange(e)},onBlur:e=>{k.handleBlur(e),k.handleSubmit(),b(!1)},autoFocus:!0})}),M<m&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s.z,{className:d,ariaLabel:"Show pages input button",variant:"link",onClick:()=>{b((e=>!e))},children:"\xa0...\xa0"}),(0,x.jsx)(s.z,{ariaLabel:"Go to page button",className:d,variant:"link",disabled:n===m||e.appIsLoading,isActive:n===m,onClick:()=>{g(m)},children:m.toString()})]})]}),m>a&&(0,x.jsx)(s.z,{className:d,variant:"link",ariaLabel:"Change pages range + button",disabled:u,onClick:()=>{w(v>=f?1:e=>e+1)},children:(0,x.jsx)(o.J,{iconId:"rightArrow",height:"100%",width:"100%",viewBox:"15 7 20 20"})})]})})}))},2376:(e,n,t)=>{t.d(n,{P:()=>m});var r,a=t(5545),s=t(2791),i=t(9271),o=t(168),l=t(1523),c=t(7884),d=t(2027);const u={ToTop:(0,c.ZP)(l.rU)(r||(r=(0,o.Z)(["\n    position: fixed;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: 1px solid;\n    background-color: ",";\n    height: 30px;\n    width: 30px;\n    top: 95%;\n    left: 95%;\n    padding: 5px;\n    border-radius: 50%;\n    transform: translate(-95%, -95%) rotate(90deg);\n    z-index: 99999;\n    &:hover {\n        box-shadow: ",";\n    }\n"])),d.r.color.background.primary,d.r.shadow.block)};var g=t(184);const m=(0,s.memo)((e=>{let{anchor_id:n}=e;const[t,r]=(0,s.useState)(!1),o=(0,i.TH)(),l=(0,s.useRef)("");(0,s.useEffect)((()=>{const e=document.querySelector("main"),n=()=>{e&&e.scrollTop>300?r(!0):r(!1)};return e&&e.addEventListener("scroll",n),()=>{e&&e.removeEventListener("scroll",n)}}),[]),(0,s.useEffect)((()=>{o.hash&&(l.current=o.hash.slice(1)),l.current&&document.getElementById(l.current)&&setTimeout((()=>{var e;null===(e=document.getElementById(l.current))||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start"}),l.current=""}),100)}),[o]);return t?(0,g.jsx)(u.ToTop,{to:"#"+n,onClick:()=>{document.location="#"+n},children:(0,g.jsx)(a.J,{iconId:"leftArrow",viewBox:"-1 9 14 14"})}):null}))},832:(e,n,t)=>{t.r(n),t.d(n,{default:()=>ve});var r=t(7082),a=t(3676),s=t(6980),i=t(2791),o="undefined"!==typeof window?i.useLayoutEffect:i.useEffect;function l(e,n){var t,r,a,s,l=void 0===n?{}:n,c=l.decayRate,d=void 0===c?.95:c,u=l.safeDisplacement,g=void 0===u?10:u,m=l.applyRubberBandEffect,p=void 0!==m&&m,h=l.activeMouseButton,x=void 0===h?"Left":h,f=l.isMounted,v=void 0===f||f,w=(0,i.useRef)({isMouseDown:!1,isDraggingX:!1,isDraggingY:!1,initialMouseX:0,initialMouseY:0,lastMouseX:0,lastMouseY:0,scrollSpeedX:0,scrollSpeedY:0,lastScrollX:0,lastScrollY:0}),y=!1,b=!1,j=0,M=0,k=1/60*1e3;o((function(){v&&(y="scroll"===window.getComputedStyle(e.current).overflowX,b="scroll"===window.getComputedStyle(e.current).overflowY,j=e.current.scrollWidth-e.current.clientWidth,M=e.current.scrollHeight-e.current.clientHeight,t=window.getComputedStyle(e.current).cursor,r=[],a=[],s=[],e.current.childNodes.forEach((function(e){r.push(window.getComputedStyle(e).cursor),a.push("none"===window.getComputedStyle(e).transform?"":window.getComputedStyle(e).transform),s.push("none"===window.getComputedStyle(e).transition?"":window.getComputedStyle(e).transition)})))}),[v]);var P,L,Z,S=function(){var n=w.current.scrollSpeedX*k,t=w.current.scrollSpeedY*k,r=e.current.scrollLeft+n,a=e.current.scrollTop+t;e.current.scrollLeft=r,e.current.scrollTop=a,w.current.lastScrollX=r,w.current.lastScrollY=a},D=function(){e.current.childNodes.forEach((function(e,n){e.style.transform=a[n],e.style.transition=s[n]}))},A=function(e){e.preventDefault(),e.stopImmediatePropagation()},I=function(n){var a=w.current.isDraggingX||w.current.isDraggingY,s=w.current.initialMouseX-n.clientX,i=w.current.initialMouseY-n.clientY,o=Math.abs(s)>g||Math.abs(i)>g,l=a&&o;l?e.current.childNodes.forEach((function(e){e.addEventListener("click",A)})):e.current.childNodes.forEach((function(e){e.removeEventListener("click",A)})),w.current.isMouseDown=!1,w.current.lastMouseX=0,w.current.lastMouseY=0,e.current.style.cursor=t,e.current.childNodes.forEach((function(e,n){e.style.cursor=r[n]})),l&&(L=setInterval((function(){var n=w.current.scrollSpeedX*d;w.current.scrollSpeedX=n;var t=e.current.scrollLeft<=0,r=e.current.scrollLeft>=j,a=t||r;S(),(Math.abs(n)<.05||w.current.isMouseDown||a)&&(w.current.scrollSpeedX=0,clearInterval(L))}),k),Z=setInterval((function(){var n=w.current.scrollSpeedY*d;w.current.scrollSpeedY=n;var t=e.current.scrollTop<=0,r=e.current.scrollTop>=M,a=t||r;S(),(Math.abs(n)<.05||w.current.isMouseDown||a)&&(w.current.scrollSpeedY=0,clearInterval(Z))}),k),w.current.isDraggingX=!1,w.current.isDraggingY=!1,p&&(e.current.childNodes.forEach((function(e){e.style.transform="translate3d(0px, 0px, 0px)",e.style.transition="transform 250ms"})),P=setTimeout(D,250)))},N=function(n){if(w.current.isMouseDown){n.preventDefault();var t=w.current.lastMouseX-n.clientX;w.current.lastMouseX=n.clientX,w.current.scrollSpeedX=t/k,w.current.isDraggingX=!0;var r=w.current.lastMouseY-n.clientY;w.current.lastMouseY=n.clientY,w.current.scrollSpeedY=r/k,w.current.isDraggingY=!0,e.current.style.cursor="grabbing",e.current.childNodes.forEach((function(e){e.style.cursor="grabbing"}));var a=e.current.scrollLeft<=0&&y,s=e.current.scrollLeft>=j&&y,i=e.current.scrollTop<=0&&b,o=e.current.scrollTop>=M&&b;(a||s||i||o)&&p&&function(n){var t=n.clientX-w.current.initialMouseX,r=n.clientY-w.current.initialMouseY,a=e.current,s=a.clientWidth,i=a.clientHeight,o=0,l=0;y&&b?(o=.3*s*Math.sign(t)*Math.log10(1+.5*Math.abs(t)/s),l=.3*i*Math.sign(r)*Math.log10(1+.5*Math.abs(r)/i)):y?o=.3*s*Math.sign(t)*Math.log10(1+.5*Math.abs(t)/s):b&&(l=.3*i*Math.sign(r)*Math.log10(1+.5*Math.abs(r)/i)),e.current.childNodes.forEach((function(e){e.style.transform="translate3d("+o+"px, "+l+"px, 0px)",e.style.transition="transform 0ms"}))}(n),S()}},C=function(){j=e.current.scrollWidth-e.current.clientWidth,M=e.current.scrollHeight-e.current.clientHeight};return(0,i.useEffect)((function(){return v&&(window.addEventListener("mouseup",I),window.addEventListener("mousemove",N),window.addEventListener("resize",C)),function(){window.removeEventListener("mouseup",I),window.removeEventListener("mousemove",N),window.removeEventListener("resize",C),clearInterval(L),clearInterval(Z),clearTimeout(P)}}),[v]),{events:{onMouseDown:function(e){var n;n=e.buttons,("Left"===x&&1===n||"Middle"===x&&4===n||"Right"===x&&2===n)&&(w.current.isMouseDown=!0,w.current.lastMouseX=e.clientX,w.current.lastMouseY=e.clientY,w.current.initialMouseX=e.clientX,w.current.initialMouseY=e.clientY)}}}}var c,d,u,g,m=t(168),p=t(8369),h=t(1523),x=t(7884),f=t(198),v=t(2027);const w={Dialog:(0,x.ZP)(h.OL)(c||(c=(0,m.Z)(["\n    position: relative;\n    display: flex;\n    height: 60%;\n    align-items: center;\n    justify-content: space-between;\n    text-align: center;\n    flex-direction: column;\n    aspect-ratio: 1 / 1;\n    padding: min(15px, 2vw);\n    &.active {\n        outline: 1px solid ",";\n        background-color: ",";\n        border-radius: 10px;\n    }\n    &:hover {\n        outline: 1px solid ",";\n        background-color: ",";\n        border-radius: 10px;\n    }\n    ","\n    word-break: break-all;\n"])),v.r.color.background.primary,v.r.color.background.primary,v.r.color.background.primary,v.r.color.background.primary,(0,f.L)({weight:400,Fmin:10,Fmax:14})),Wrapper:x.ZP.div(d||(d=(0,m.Z)(["\n    display: flex;\n    overflow-x: auto;\n    min-height: 100%;\n    width: 100%;\n"]))),Photo:(0,x.ZP)(p.q)(u||(u=(0,m.Z)(["\n    width: 70%;\n"]))),Name:x.ZP.span(g||(g=(0,m.Z)(["\n    color: ","\n"])),v.r.color.text.primary_dark)};var y=t(184);const b=(0,i.memo)((e=>{let{dialogs:n,className:t}=e;const o=(0,i.useRef)(null),c=(0,i.useRef)(),{events:d}=l(c,{isMounted:!0});return(0,i.useEffect)((()=>{var e;null===(e=o.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[n]),(0,y.jsxs)(s.c,{id:"dialogs-block",children:[(0,y.jsxs)(a.t,{children:["Dialogs: ",n.length]}),(0,y.jsx)(w.Wrapper,{ref:c,...d,children:n.map(((e,n)=>(0,y.jsxs)(w.Dialog,{ref:0===n?o:null,to:r.m.Messages+e.id,children:[(0,y.jsx)(w.Photo,{className:t,avatarURL:e.photos.small,lastActivityDate:e.lastUserActivityDate,newMessagesCount:e.newMessagesCount}),(0,y.jsx)(w.Name,{children:e.userName})]},e.id)))})]})}));var j,M=t(6858),k=t(8472),P=t(80),L=t(9250),Z=t(5705);const S={Form:x.ZP.form(j||(j=(0,m.Z)(["\n    display: flex;\n    flex-direction: column;\n    justify-self: end;\n    gap: 10px;\n    textarea {\n        min-height: 70px;\n    }\n"])))},D=e=>{let{addMessage:n,addAppAlert:t}=e;const r=(0,Z.TA)({initialValues:{message:""},onSubmit:e=>{n(e.message),r.resetForm()},validate:e=>{const n={};return e.message?e.message.length>300&&(n.message="Message must be less than 300 symbols!",t("failed",n.message)):n.message="Message is emtyt!",n}});return(0,y.jsxs)(S.Form,{onSubmit:r.handleSubmit,onKeyDown:e=>{"Enter"===e.key&&e.ctrlKey&&r.handleSubmit(e)},children:[(0,y.jsx)(L.I,{as:"textarea","aria-label":"enter your message",placeholder:"Enter your message",bordered:"true",id:"message",error:r.errors.message?"true":"false",...r.getFieldProps("message"),autoFocus:!0}),(0,y.jsx)(P.A,{children:(0,y.jsx)(k.z,{type:"submit",variant:"primary",disabled:!!r.errors.message,ariaLabel:"Submit button",children:"Send"})})]})};var A,I,N,C,F,E,X,Y=t(5545);const T=x.ZP.div(A||(A=(0,m.Z)(["\n    display: flex;\n    flex-direction: column;\n    gap: min(15px, 1vw);\n    ","\n    border-bottom: 1px solid;\n    border-color: ",";\n"])),(0,f.L)({weight:500,Fmin:10,Fmax:16}),v.r.color.background.primary),B=(0,x.ZP)(P.A)(I||(I=(0,m.Z)(["\n    display: flex;\n    align-self: center;\n    text-align: justify;\n    word-wrap: break-word;\n    width: 100%;\n    height: 100%;\n    color: ",";\n"])),v.r.color.text.primary_dark),R=x.ZP.span(N||(N=(0,m.Z)(["\n    align-self: center;\n    justify-content: center;\n    text-align: center;\n    color: ",";\n    width: 100%;\n"])),v.r.color.text.primary),U=x.ZP.span(C||(C=(0,m.Z)(["\n    text-align: center;\n    ","\n    color: ",";\n"])),(0,f.L)({weight:400,Fmin:10,Fmax:14}),v.r.color.text.primary_dark),H=(0,x.ZP)(p.q)(F||(F=(0,m.Z)(["\n    min-width: 40px;\n    max-width: 60px;\n"]))),z=x.ZP.span(E||(E=(0,m.Z)(["\n    ","\n    align-self: center;\n    text-align: center;\n"])),(0,f.L)({weight:300,Fmin:8,Fmax:10})),O=(0,x.ZP)(k.z)(X||(X=(0,m.Z)(["\n    opacity: .3;\n    align-self: center;\n    text-align: center;\n"]))),W={Message:T,Date:R,Avatar:p.q,Name:U,Photo:H,Text:B,Time:z,OptionButton:O},_=(0,i.memo)((e=>{const{messageData:n,authId:t,authPhoto:r,opponentPhoto:a,markMessageAsDelete:s,markMessageAsSpam:o}=e,l=(0,i.useRef)(null);(0,i.useEffect)((()=>{var e;null===(e=l.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[n]);return(0,y.jsxs)(W.Message,{children:[(0,y.jsx)(W.Date,{children:(e=>new Date(e).toLocaleDateString())(n.addedAt)}),(0,y.jsxs)(P.A,{style:{backgroundColor:n.viewed?"none":v.r.color.background.primary,borderRadius:"10px",padding:"min(15px, 1vw)"},direction:n.senderId===t?"row":"row-reverse",gap:"min(15px, 1vw)",children:[(0,y.jsx)(W.Time,{children:(e=>"".concat(new Date(e).getHours(),":").concat(new Date(e).getMinutes()))(n.addedAt)}),n.senderId===t?(0,y.jsxs)(P.A,{direction:"column",align:"center",justify:"center",children:[(0,y.jsx)(W.Photo,{avatarURL:r}),(0,y.jsxs)(W.Name,{children:[n.senderName,"\xa0"]})]}):(0,y.jsxs)(P.A,{direction:"column",align:"center",justify:"center",children:[(0,y.jsx)(W.Photo,{avatarURL:a}),(0,y.jsxs)(W.Name,{children:[n.senderName,"\xa0"]})]}),(0,y.jsx)(W.Text,{justify:n.senderId===t?"start":"end",align:"center",children:n.body}),(0,y.jsx)(P.A,{style:n.viewed?{opacity:1}:{opacity:.3},align:"center",justify:"center",children:(0,y.jsx)(Y.J,{width:"80%",iconId:"readed"})})]}),(0,y.jsxs)(P.A,{gap:"min(15px, 1vw)",align:"center",justify:"center",children:[(0,y.jsx)(W.OptionButton,{title:"Delete message",variant:"link",onClick:()=>s(n.id),ariaLabel:"Delete",children:(0,y.jsx)(Y.J,{iconId:"trash"})}),n.senderId!==t&&(0,y.jsx)(W.OptionButton,{title:"Mark as spam",variant:"link",onClick:()=>o(n.id),ariaLabel:"Spam",children:(0,y.jsx)(Y.J,{iconId:"spam"})})]}),(0,y.jsx)("div",{style:{padding:0,margin:0},ref:l})]})}));var J,q,V;const G={MessagesList:x.ZP.div(J||(J=(0,m.Z)(["\n    display: flex;\n    min-height: fit-content;\n    flex-direction: column;\n    gap: min(15px, 1vw);\n    overflow-y: auto;\n"]))),EmptyMessages:x.ZP.div(q||(q=(0,m.Z)(["\n    display: flex;\n    flex-direction: column;\n    align-self: center;\n    padding-bottom: min(15px, 1vw);\n    overflow-y: hidden;\n"]))),LoadMessgesButton:(0,x.ZP)(k.z)(V||(V=(0,m.Z)(["\n    display: flex;\n    min-width: 100%;\n    justify-content: center;\n"])))},K=(0,i.memo)((e=>{const{messageData:n,authId:t,authPhoto:r,opponentPhoto:a,restoreMessage:s}=e;return(0,y.jsxs)(W.Message,{children:[(0,y.jsx)(W.Date,{children:(e=>new Date(e).toLocaleDateString())(n.addedAt)}),(0,y.jsxs)(P.A,{style:{backgroundColor:n.viewed?"none":v.r.color.background.primary,borderRadius:"10px",padding:"min(15px, 1vw)"},direction:n.senderId===t?"row":"row-reverse",gap:"min(15px, 1vw)",children:[(0,y.jsx)(W.Time,{children:(e=>"".concat(new Date(e).getHours(),":").concat(new Date(e).getMinutes()))(n.addedAt)}),n.senderId===t?(0,y.jsxs)(P.A,{direction:"column",align:"center",justify:"center",children:[(0,y.jsx)(W.Photo,{avatarURL:r}),(0,y.jsxs)(W.Name,{children:[n.senderName,"\xa0"]})]}):(0,y.jsxs)(P.A,{direction:"column",align:"center",justify:"center",children:[(0,y.jsx)(W.Photo,{avatarURL:a}),(0,y.jsxs)(W.Name,{children:[n.senderName,"\xa0"]})]}),(0,y.jsxs)(P.A,{direction:"column",style:{width:"100%"},children:[(0,y.jsx)(W.Text,{justify:n.senderId===t?"start":"end",align:"center",children:n.body}),(0,y.jsxs)(W.Text,{style:{opacity:.5},justify:n.senderId===t?"start":"end",align:"center",children:["This messge mark ",n.isSpam?' as "SPAM" ':" for delete and will be removed!"]})]}),(0,y.jsx)(P.A,{style:n.viewed?{opacity:1}:{opacity:.3},align:"center",justify:"center",children:(0,y.jsx)(Y.J,{width:"80%",iconId:"readed"})})]}),(0,y.jsx)(P.A,{gap:"min(15px, 1vw)",align:"center",justify:"center",children:(0,y.jsx)(W.OptionButton,{title:"Undo",variant:"link",onClick:()=>s(n.id),ariaLabel:"Undo",children:(0,y.jsx)(Y.J,{iconId:"restore"})})})]})})),$=e=>{const{authData:n,appIsLoading:t,pageChangeHandler:r,markMessageAsDelete:a,markMessageAsSpam:s,restoreMessage:i}=e,{messagesOnPage:o,totalMessagesCount:l,messages:c,dialogs:d}=e.messagesState;return(0,y.jsxs)(G.MessagesList,{children:[o<l&&(0,y.jsx)(G.LoadMessgesButton,{variant:"outlined",ariaLabel:"Load more messages",disabled:t,onClick:r,children:"load more messages..."}),c.length?c.map((e=>{var t,r;return e.isDleted||e.isSpam?(0,y.jsx)(K,{authId:n.id,messageData:e,authPhoto:n.photoUrl,opponentPhoto:null===(r=d[0])||void 0===r?void 0:r.photos.small,restoreMessage:i},e.id):(0,y.jsx)(_,{authId:n.id,messageData:e,authPhoto:n.photoUrl,opponentPhoto:null===(t=d[0])||void 0===t?void 0:t.photos.small,markMessageAsDelete:a,markMessageAsSpam:s},e.id)})):(0,y.jsx)(G.EmptyMessages,{children:"No messages..."})]})};var Q,ee,ne,te;const re={MessagesBlock:(0,x.ZP)(s.c)(Q||(Q=(0,m.Z)(["\n    min-height: fit-content;\n    max-height: 124.5vh;\n    justify-content: space-between;\n"]))),Header:(0,x.ZP)(a.t)(ee||(ee=(0,m.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: start;\n"]))),ProfileLink:(0,x.ZP)(h.OL)(ne||(ne=(0,m.Z)(["\n    display: flex;\n    gap: 10px;\n    align-items: center;\n    width: min(40px, 8vw);\n"]))),ListWrapper:x.ZP.div(te||(te=(0,m.Z)(["\n    display: flex;\n    flex-direction: column;\n    overflow-y: auto;\n"])))},ae=(0,i.memo)((e=>{var n,t,a;const{addMessage:s,addAppAlert:i,pageChangeHandler:o,authData:l,appIsLoading:c,messagesState:d,markMessageAsDelete:u,markMessageAsSpam:g,restoreMessage:m}=e;return(0,y.jsxs)(re.MessagesBlock,{id:"messages-block",children:[(0,y.jsx)(re.Header,{children:(0,y.jsxs)(re.ProfileLink,{to:r.m.Profile+(null===(n=d.dialogs[0])||void 0===n?void 0:n.id),children:[(0,y.jsx)(p.q,{avatarURL:null===(t=d.dialogs[0])||void 0===t?void 0:t.photos.small}),null===(a=d.dialogs[0])||void 0===a?void 0:a.userName,":"]})}),(0,y.jsxs)(re.ListWrapper,{children:[(0,y.jsx)($,{authData:l,appIsLoading:c,messagesState:d,pageChangeHandler:o,markMessageAsDelete:u,markMessageAsSpam:g,restoreMessage:m}),(0,y.jsx)(D,{addAppAlert:i,addMessage:s})]})]})}));var se,ie,oe,le=t(2376),ce=t(5978),de=t(9271),ue=t(1113),ge=t(8507),me=t(4154),pe=t(8112);const he=x.ZP.main(se||(se=(0,m.Z)(["\n    height: 100%;\n    gap: min(30px, 2vw);\n    display: flex;\n    overflow-x: hidden;\n    @media "," {\n        flex-direction: column;\n    }\n    "])),v.r.media.mobile),xe=x.ZP.div(ie||(ie=(0,m.Z)(["\n    display: flex;\n    flex-direction: column;\n    gap: min(30px, 2vw);\n    min-width: 170px;\n    max-width: 20%;\n    @media "," {\n        display: none;\n    }\n    "])),v.r.media.mobile),fe={Messages:he,MessagesWrapper:x.ZP.div(oe||(oe=(0,m.Z)(["\n    display: flex;\n    flex-direction: column;\n    width: 80%;\n    gap: min(30px, 2vw);\n    @media "," {\n        width: 100%;\n    }\n"])),v.r.media.mobile),FriendsWrapper:xe},ve=(0,i.memo)((e=>{let{className:n}=e;const t=(0,ce.v9)(me.CL),a=(0,ce.v9)(ue.DU),s=(0,ce.v9)(ge.$I),{addAppAlert:o,startDialog:l,getDialogs:c,sendMessage:d,getMessages:u,markMessageAsDelete:g,markMessageAsSpam:m,restoreMessage:p}=(0,pe.o)(),h=(0,de.UO)(),x=(0,de.k6)(),{currentPage:f,messagesOnPage:v,totalMessagesCount:w}=t;(0,i.useEffect)((()=>{h.userId?(l(+h.userId),u({userId:+h.userId,currentPage:f,messagesOnPage:v})):c().then((e=>{var n;null!==(n=e.payload)&&void 0!==n&&n.dialogs[0]?x.push(r.m.Messages+e.payload.dialogs[0].id):o("info","Dialogs is emty... Start chatting with someone.")})).catch((e=>{o("failed",e)}))}),[h.userId,f,v]);return(0,y.jsxs)(fe.Messages,{id:"messages",children:[(0,y.jsx)(le.P,{anchor_id:"dialogs-block"}),(0,y.jsxs)(fe.FriendsWrapper,{children:[(0,y.jsx)(M.S,{className:n,headerName:"Friens"}),(0,y.jsx)(M.S,{className:n,headerName:"Might know",isFriends:!1})]}),(0,y.jsxs)(fe.MessagesWrapper,{children:[(0,y.jsx)(b,{dialogs:t.dialogs}),(0,y.jsx)(ae,{authData:s,appIsLoading:a,messagesState:t,addMessage:e=>{h.userId&&d({userId:+h.userId,message:e})},addAppAlert:o,markMessageAsDelete:g,markMessageAsSpam:m,pageChangeHandler:()=>{let e=v;v<w&&(e+=3,u({userId:+h.userId,currentPage:1,messagesOnPage:e}))},restoreMessage:p})]})]})}))}}]);
//# sourceMappingURL=832.6e105d2e.chunk.js.map